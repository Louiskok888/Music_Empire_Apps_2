(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{161:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return n(1174)}])},1174:function(t,e,n){"use strict";n.r(e),n.d(e,{__N_SSP:function(){return p}});var r=n(8520),i=n.n(r),s=n(5893),c=n(4468),d=n.n(c),l=n(5675),a=n(9669),o=n.n(a),u=n(7294),h=n(1664);function x(t,e,n,r,i,s,c){try{var d=t[s](c),l=d.value}catch(a){return void n(a)}d.done?e(l):Promise.resolve(l).then(r,i)}function j(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function c(t){x(s,r,i,c,d,"next",t)}function d(t){x(s,r,i,c,d,"throw",t)}c(void 0)}))}}function f(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var p=!0;e.default=function(t){var e=t.orders,n=t.products,r=(0,u.useState)(n),c=r[0],a=r[1],x=(0,u.useState)(e),p=x[0],m=x[1],_=["preparing","on the way","delivered"],b=j(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o().delete("http://localhost:3000/api/products/"+e);case 3:t.sent,a(c.filter((function(t){return t._id!==e}))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),v=j(i().mark((function t(e){var n,r,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p.filter((function(t){return t._id===e}))[0],r=n.status,t.prev=2,t.next=5,o().put("http://localhost:3000/api/orders/"+e,{status:r+1});case 5:s=t.sent,m([s.data].concat(f(p.filter((function(t){return t._id!==e}))))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return(0,s.jsxs)("div",{className:d().container,children:[(0,s.jsxs)("div",{className:d().item,children:[(0,s.jsx)("h1",{className:d().title,children:"Products"}),(0,s.jsxs)("table",{className:d().table,children:[(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{className:d().trTitle,children:[(0,s.jsx)("th",{children:"Image"}),(0,s.jsx)("th",{children:"Id"}),(0,s.jsx)("th",{children:"Title"}),(0,s.jsx)("th",{children:"Price"}),(0,s.jsx)("th",{children:"Action"})]})}),c.map((function(t){return(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{className:d().trTitle,children:[(0,s.jsx)("td",{children:(0,s.jsx)(l.default,{src:t.img,width:50,height:50,objectFit:"cover",alt:""})}),(0,s.jsxs)("td",{children:[t._id.slice(0,5),"..."]}),(0,s.jsx)("td",{children:t.title}),(0,s.jsx)("td",{children:t.price}),(0,s.jsxs)("td",{children:[(0,s.jsx)(h.default,{href:{pathname:"/edit",query:{productId:t._id,productTitle:t.title,productImg:t.img,productDesc:t.desc}},passHref:!0,children:(0,s.jsx)("button",{className:d().button,onClick:function(){return t._id,t.title,t.img,void console.log("edit btn press")},children:"Edit"})}),(0,s.jsx)("button",{className:d().button,onClick:function(){return b(t._id)},children:"Delete"})]})]})},t._id)}))]})]}),(0,s.jsxs)("div",{className:d().item,children:[(0,s.jsx)("h1",{className:d().title,children:"Orders"}),(0,s.jsxs)("table",{className:d().table,children:[(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{className:d().trTitle,children:[(0,s.jsx)("th",{children:"Id"}),(0,s.jsx)("th",{children:"Customer"}),(0,s.jsx)("th",{children:"Total"}),(0,s.jsx)("th",{children:"Payment"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{children:"Action"})]})}),p.map((function(t){return(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{className:d().trTitle,children:[(0,s.jsxs)("td",{children:[t._id.slice(0,5),"..."]}),(0,s.jsx)("td",{children:t.customer}),(0,s.jsx)("td",{children:t.total}),(0,s.jsx)("td",{children:0===t.method?(0,s.jsx)("span",{children:"cash"}):(0,s.jsx)("span",{children:"paid"})}),(0,s.jsx)("td",{children:_[t.status]}),(0,s.jsx)("td",{children:(0,s.jsx)("button",{onClick:function(){return v(t._id)},children:"Next stage"})})]})},t._id)}))]})]})]})}},4468:function(t){t.exports={container:"Admin_container__7Kd1y",item:"Admin_item__FuGBz",table:"Admin_table__brNHw",button:"Admin_button___uar2"}}},function(t){t.O(0,[669,774,888,179],(function(){return e=161,t(t.s=e);var e}));var e=t.O();_N_E=e}]);